<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang='en'>
<head>
<title>Sequel::Plugins::SerializationModificationDetection</title>
<meta name='viewport' content='width=device-width, initial-scale=1'>
<meta content='text/html; charset=UTF-8' http-equiv='Content-Type'>
<link href='../../../css/style.css' media='screen' rel='stylesheet' type='text/css'>
<script type='text/javascript'>
  function popupCode(url) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }
  
  function toggleCode(id) {
    var code = document.getElementById(id)
  
    code.style.display = code.style.display != 'block' ? 'block' : 'none'
    return true
  }
  
  // Make codeblocks hidden by default
  document.writeln('<' + 'style type="text/css">.method .source pre { display: none }<\/style>')
</script>
</head>
<body class='page'>
<div class='class' id='wrapper'>
<div class='header'>
<h1 class='name'><span class='type'>module</span>
Sequel::Plugins::SerializationModificationDetection
</h1>
<ol class='paths'>
<li>
<a href="../../../files/lib/sequel/plugins/serialization_modification_detection_rb.html">lib/sequel/plugins/serialization_modification_detection.rb</a>
</li>
</ol>
</div>
<div id='content'>
<div id='text'>
<div id='description'>
<p>This plugin extends the serialization plugin and enables it to detect changes in serialized values by checking whether the current deserialized value is the same as the original deserialized value. The serialization plugin does not do such checks by default, as they often arenâ€™t needed and can hurt performance.</p>

<p>Note that for this plugin to work correctly, the values you are serializing must roundtrip correctly (i.e. deserialize(serialize(value)) should equal value).  This is true in most cases, but not in all.  For example, ruby symbols round trip through yaml, but not json (as they get turned into strings in json).</p>

<h2 id="module-Sequel::Plugins::SerializationModificationDetection-label-Example">Example<span><a href="#module-Sequel::Plugins::SerializationModificationDetection-label-Example">&para;</a> <a href="#top">&uarr;</a></span></h2>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&#39;sequel&#39;</span>
<span class="ruby-identifier">require</span> <span class="ruby-string">&#39;json&#39;</span>
<span class="ruby-keyword">class</span> <span class="ruby-constant">User</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">Sequel</span><span class="ruby-operator">::</span><span class="ruby-constant">Model</span>
  <span class="ruby-identifier">plugin</span> <span class="ruby-value">:serialization</span>, <span class="ruby-value">:json</span>, <span class="ruby-value">:permissions</span>
  <span class="ruby-identifier">plugin</span> <span class="ruby-value">:serialization_modification_detection</span>
<span class="ruby-keyword">end</span>
<span class="ruby-identifier">user</span> = <span class="ruby-constant">User</span>.<span class="ruby-identifier">create</span>(<span class="ruby-value">permissions:</span> {})
<span class="ruby-identifier">user</span>.<span class="ruby-identifier">permissions</span>[<span class="ruby-value">:global</span>] = <span class="ruby-string">&#39;read-only&#39;</span>
<span class="ruby-identifier">user</span>.<span class="ruby-identifier">save_changes</span>
</pre>
</div>
<div id='method-list'>
<h2>Methods</h2>
<h3>Public Class</h3>
<ol>
<li><a href="#method-c-apply">apply</a></li>
</ol>
</div>
<div id='context'>
</div>
<div id='class-list'>
<h2>Classes and Modules</h2>
<ol>
<li><a href="SerializationModificationDetection/InstanceMethods.html">Sequel::Plugins::SerializationModificationDetection::InstanceMethods</a></li>
</ol>
</div>
<div id='section'>
<div id='methods'>
<h2>Public Class methods</h2>
<div class='method public-class' id='method-method-c-apply'>
<a name='method-c-apply'></a>
<div class='synopsis'>
<span class='name'>apply</span><span class='arguments'>(model)</span>

</div>
<div class='description'>

<p>Load the serialization plugin automatically.</p>

</div>
<div class='source'>
<a class='source-toggle' href='#' onclick='toggleCode(&#39;method-c-apply-source&#39;); return false'>
[show source]
</a>
<pre id='method-c-apply-source'>   <span class="ruby-comment"># File lib/sequel/plugins/serialization_modification_detection.rb</span>
<span class="line-num">30</span> <span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier ruby-title">apply</span>(<span class="ruby-identifier">model</span>)
<span class="line-num">31</span>   <span class="ruby-identifier">model</span>.<span class="ruby-identifier">plugin</span> <span class="ruby-value">:serialization</span>
<span class="line-num">32</span> <span class="ruby-keyword">end</span></pre>
</div>
</div>
</div>
</div>

</div>
</div>

<div id='footer-push'></div>
</div>
<div id='footer'>
<a href="https://github.com/jeremyevans/hanna"><strong>Hanna</strong> RDoc template</a>
</div>
</body>
</html>
