<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang='en'>
<head>
<title>Sequel::Plugins::EagerEach</title>
<meta name='viewport' content='width=device-width, initial-scale=1'>
<meta content='text/html; charset=UTF-8' http-equiv='Content-Type'>
<link href='../../../css/style.css' media='screen' rel='stylesheet' type='text/css'>
<script type='text/javascript'>
  function popupCode(url) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }
  
  function toggleCode(id) {
    var code = document.getElementById(id)
  
    code.style.display = code.style.display != 'block' ? 'block' : 'none'
    return true
  }
  
  // Make codeblocks hidden by default
  document.writeln('<' + 'style type="text/css">.method .source pre { display: none }<\/style>')
</script>
</head>
<body class='page'>
<div class='class' id='wrapper'>
<div class='header'>
<h1 class='name'><span class='type'>module</span>
Sequel::Plugins::EagerEach
</h1>
<ol class='paths'>
<li>
<a href="../../../files/lib/sequel/plugins/eager_each_rb.html">lib/sequel/plugins/eager_each.rb</a>
</li>
</ol>
</div>
<div id='content'>
<div id='text'>
<div id='description'>
<p>The eager_each plugin makes calling each on an eager loaded dataset do eager loading. By default, each does not work on an eager loaded dataset, because each iterates over rows of the dataset as they come in, and to eagerly load you need to have all values up front.  With the default associations code, you must call all on an eagerly loaded dataset, as calling each on an eager dataset skips the eager loading, and calling each on an eager_graph dataset makes it yield plain hashes with columns from all tables, instead of yielding the instances of the main model.</p>

<p>This plugin makes each call all for eagerly loaded datasets.  As all usually calls each, this is a bit of issue, but this plugin resolves the issue by cloning the dataset and setting a new flag in the cloned dataset, so that each can check with the flag to determine whether it should call all.</p>

<p>This plugin also makes first and related methods that load single records work with eager loading.  Note that when using eager_graph, calling first or a similar method will result in two queries, one to load the main object, and one to eagerly load all associated objects to that main object.</p>

<p>Usage:</p>

<pre class="ruby"><span class="ruby-comment"># Make all model subclass instances eagerly load for each (called before loading subclasses)</span>
<span class="ruby-constant">Sequel</span><span class="ruby-operator">::</span><span class="ruby-constant">Model</span>.<span class="ruby-identifier">plugin</span> <span class="ruby-value">:eager_each</span>

<span class="ruby-comment"># Make the Album class eagerly load for each</span>
<span class="ruby-constant">Album</span>.<span class="ruby-identifier">plugin</span> <span class="ruby-value">:eager_each</span>
</pre>
</div>
<div id='context'>
</div>
<div id='class-list'>
<h2>Classes and Modules</h2>
<ol>
<li><a href="EagerEach/DatasetMethods.html">Sequel::Plugins::EagerEach::DatasetMethods</a></li>
</ol>
</div>
<div id='section'>
</div>

</div>
</div>

<div id='footer-push'></div>
</div>
<div id='footer'>
<a href="https://github.com/jeremyevans/hanna"><strong>Hanna</strong> RDoc template</a>
</div>
</body>
</html>
